--[[
  Heroes: Online World - Full Working Script with Key System & Features
  Usage: loadstring(game:HttpGet("your-url-here"))()
]]

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer

-- Replace with the actual remote event used by your game for unlocks and health manipulation
local unlockEvent = ReplicatedStorage:WaitForChild("metaRemoteEvent")

local validKey = "HEROES123" -- change this to your chosen key

local charactersToUnlock = {
  "Character","Pulse","Azula","PersonalShield","SummonShield","FateClone","FateClone2","SandClone",
  "HumanTorch","SkeletonSypha2","Clone1","Clone2","LokiClone","LokiCloneOld","Goblin","PalaceGoblin",
  "DEMON","MomWandaX","MantisX","Skeleton","NPCRaven","SabrinaRaven","DemonGoat","JohnnyFireRaven",
  "SylvieClone","Syp","Victim","RigAbsorb","StrangeClone","AgathaHarkness","Ajak","ArcherSkeleton",
  "AtomEve","Bella","BlackPanther","BlackWidow","Bloom","BlueMarvel","Bonnie","BumbleBee","ChildKlarion",
  "Cyborg","DanSpooky","DarkBloom","DarkJosie","DarkPhoenix","DrFate","DragonFairy","Eleven","EmmaFrost",
  "FirePrincess","GwenBen10","HarryWizard","Hera","HumanTorchFuture","IceWitch","Ikaris","InvisibleWoman",
  "IronMan","JohnLantern","Katara","KingBlackPanther","Klarion","Loki","MadelynePryor","Magik","Magneto",
  "MaleficentAscended","Mantis","Mera","MomWanda","Musa","NatureFairy","PercyJackson","Solaris","Polaris",
  "Powergirl","PromRaven","Psylocke","Raven","RobotDoll","Roman","Sabrina","ScarletFortuneTeller",
  "ScarletUltron","ScarletWitch","Shiklah","Spidergwen","Spiderman","SquidManager","StarSapphire","Stella",
  "Storm","StormBride","StormChristmas","StormValentine","Stormy","SunnyGwen","Supergirl","Superman",
  "SylvieX","Sypha","Tevin","Thor","TrinityY2KBlue","Ultron","Venom","WandaVision","WaterFairy","Wednesday",
  "WhiteRaven","Zatanna","LaurenStrucker","DustCleopatra","SabrinaDaenerys","DrStrange","Evanora",
  "PoisonIvy","TechFairy","SolarisY2K","MotherNature","PsylockeSakura","AgathaCasual","MCU","RavenRage",
  "LimboShiklahMorph","AgathaMother","1PlaceDummy","2PlaceDummy","3PlaceDummy"
}

-- Create the main ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "HeroesOnlineWorldGui"
screenGui.Parent = game:GetService("CoreGui")
screenGui.ResetOnSpawn = false

-- Utility to make frame draggable
local function makeDraggable(frame)
  local UserInputService = game:GetService("UserInputService")
  local dragging, dragInput, dragStart, startPos
  
  frame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
      dragging = true
      dragStart = input.Position
      startPos = frame.Position
      input.Changed:Connect(function()
        if input.UserInputState == Enum.UserInputState.End then
          dragging = false
        end
      end)
    end
  end)
  
  frame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
      dragInput = input
    end
  end)
  
  UserInputService.InputChanged:Connect(function(input)
    if dragging and input == dragInput then
      local delta = input.Position - dragStart
      frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X,
                                 startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
  end)
end

-- KEY SYSTEM GUI
local keyGui = Instance.new("Frame")
keyGui.Name = "KeyGui"
keyGui.Size = UDim2.new(0, 350, 0, 140)
keyGui.Position = UDim2.new(0.5, -175, 0.5, -70)
keyGui.BackgroundColor3 = Color3.fromRGB(30,30,30)
keyGui.BorderSizePixel = 0
keyGui.Parent = screenGui
makeDraggable(keyGui)

local keyTitle = Instance.new("TextLabel")
keyTitle.Size = UDim2.new(1, 0, 0, 40)
keyTitle.BackgroundTransparency = 1
keyTitle.Text = "Enter Key to Unlock Features"
keyTitle.TextColor3 = Color3.new(1,1,1)
keyTitle.Font = Enum.Font.SourceSansBold
keyTitle.TextSize = 20
keyTitle.Parent = keyGui

local keyBox = Instance.new("TextBox")
keyBox.Size = UDim2.new(0.8, 0, 0, 40)
keyBox.Position = UDim2.new(0.1, 0, 0, 45)
keyBox.BackgroundColor3 = Color3.fromRGB(50,50,50)
keyBox.TextColor3 = Color3.new(1,1,1)
keyBox.PlaceholderText = "Enter key here"
keyBox.ClearTextOnFocus = false
keyBox.Font = Enum.Font.SourceSans
keyBox.TextSize = 18
keyBox.Parent = keyGui

local submitBtn = Instance.new("TextButton")
submitBtn.Size = UDim2.new(0.4, 0, 0, 40)
submitBtn.Position = UDim2.new(0.3, 0, 0, 90)
submitBtn.BackgroundColor3 = Color3.fromRGB(70,130,180)
submitBtn.Text = "Submit"
submitBtn.TextColor3 = Color3.new(1,1,1)
submitBtn.Font = Enum.Font.SourceSansBold
submitBtn.TextSize = 18
submitBtn.Parent = keyGui

local keyStatus = Instance.new("TextLabel")
keyStatus.Size = UDim2.new(1, 0, 0, 20)
keyStatus.Position = UDim2.new(0, 0, 1, -20)
keyStatus.BackgroundTransparency = 1
keyStatus.TextColor3 = Color3.fromRGB(255,50,50)
keyStatus.Font = Enum.Font.SourceSans
keyStatus.TextSize = 14
keyStatus.Text = ""
keyStatus.Parent = keyGui

-- FEATURES GUI (hidden initially)
local featuresGui = Instance.new("Frame")
featuresGui.Name = "FeaturesGui"
featuresGui.Size = UDim2.new(0, 350, 0, 280)
featuresGui.Position = UDim2.new(0.5, -175, 0.5, -140)
featuresGui.BackgroundColor3 = Color3.fromRGB(25,25,25)
featuresGui.BorderSizePixel = 0
featuresGui.Visible = false
featuresGui.Parent = screenGui
makeDraggable(featuresGui)

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 40)
title.BackgroundTransparency = 1
title.Text = "Heroes: Online World - Features"
title.TextColor3 = Color3.new(1,1,1)
title.Font = Enum.Font.SourceSansBold
title.TextSize = 20
title.Parent = featuresGui

-- Minimize Button
local minimizeBtn = Instance.new("TextButton")
minimizeBtn.Size = UDim2.new(0, 40, 0, 40)
minimizeBtn.Position = UDim2.new(1, -45, 0, 0)
minimizeBtn.Text = "-"
minimizeBtn.TextColor3 = Color3.new(1,1,1)
minimizeBtn.BackgroundColor3 = Color3.fromRGB(60,60,60)
minimizeBtn.Font = Enum.Font.SourceSansBold
minimizeBtn.TextSize = 30
minimizeBtn.Parent = featuresGui

-- Open Button (hidden initially)
local openBtn = Instance.new("TextButton")
openBtn.Size = UDim2.new(0, 120, 0, 40)
openBtn.Position = UDim2.new(0.5, -60, 0.5, -20)
openBtn.Text = "Open Features"
openBtn.TextColor3 = Color3.new(1,1,1)
openBtn.BackgroundColor3 = Color3.fromRGB(60,60,60)
openBtn.Font = Enum.Font.SourceSansBold
openBtn.TextSize = 20
openBtn.Visible = false
openBtn.Parent = screenGui

-- Feature buttons

local function createFeatureBtn(text, posY)
  local btn = Instance.new("TextButton")
  btn.Size = UDim2.new(0.8, 0, 0, 40)
  btn.Position = UDim2.new(0.1, 0, 0, posY)
  btn.BackgroundColor3 = Color3.fromRGB(70,130,180)
  btn.TextColor3 = Color3.new(1,1,1)
  btn.Font = Enum.Font.SourceSansBold
  btn.TextSize = 18
  btn.Text = text
  btn.Parent = featuresGui
  return btn
end

local invincibleBtn = createFeatureBtn("Toggle Invincibility: OFF", 60)
local infiniteCoinsBtn = createFeatureBtn("Toggle Infinite Coins: OFF", 110)
local unlockAllBtn = createFeatureBtn("Unlock All Characters", 160)
local closeBtn = createFeatureBtn("Close GUI", 210)
closeBtn.BackgroundColor3 = Color3.fromRGB(180, 70, 70)

-- Feature states
local invincible = false
local infiniteCoins = false

-- Functions for toggling invincibility
local function toggleInvincibility()
    invincible = not invincible
    if invincible then
        invincibleBtn.Text = "Toggle Invincibility: ON"
        -- Example: constantly heal player (replace with actual game logic)
        spawn(function()
            while invincible and player.Character and player.Character:FindFirstChild("Humanoid") do
                player.Character.Humanoid.Health = player.Character.Humanoid.MaxHealth
                wait(0.5)
            end
        end)
    else
        invincibleBtn.Text = "Toggle Invincibility: OFF"
    end
end

-- Functions for toggling infinite coins
local function toggleInfiniteCoins()
    infiniteCoins = not infiniteCoins
    if infiniteCoins then
        infiniteCoinsBtn.Text = "Toggle Infinite Coins: ON"
        -- Example: keep setting coins to a high amount (replace with your actual coins path)
        spawn(function()
            while infiniteCoins do
                if player:FindFirstChild("leaderstats") and player.leaderstats:FindFirstChild("Coins") then
                    player.leaderstats.Coins.Value = 999999
                end
                wait(1)
            end
        end)
    else
        infiniteCoinsBtn.Text = "Toggle Infinite Coins: OFF"
    end
end

-- Function to unlock all characters
local function unlockAllCharacters()
    for _, charName in ipairs(charactersToUnlock) do
        -- Fire your game's remote event with proper arguments for unlocking
        pcall(function()
            unlockEvent:FireServer("UnlockCharacter", charName)
        end)
    end
    unlockAllBtn.Text = "All Characters Unlocked!"
    wait(3)
    unlockAllBtn.Text = "Unlock All Characters"
end

-- Connect buttons
invincibleBtn.MouseButton1Click:Connect(toggleInvincibility)
infiniteCoinsBtn.MouseButton1Click:Connect(toggleInfiniteCoins)
unlockAllBtn.MouseButton1Click:Connect(unlockAllCharacters)

closeBtn.MouseButton1Click:Connect(function()
    featuresGui.Visible = false
    openBtn.Visible = true
end)

minimizeBtn.MouseButton1Click:Connect(function()
    featuresGui.Visible = false
    openBtn.Visible = true
end)

openBtn.MouseButton1Click:Connect(function()
    featuresGui.Visible = true
    openBtn.Visible = false
end)

-- Key system submit button
submitBtn.MouseButton1Click:Connect(function()
    if keyBox.Text == validKey then
        keyStatus.TextColor3 = Color3.fromRGB(50,255,50)
        keyStatus.Text = "Key accepted! Unlocking features..."
        wait(1)
        keyGui.Visible = false
        featuresGui.Visible = true
    else
        keyStatus.TextColor3 = Color3.fromRGB(255,50,50)
        keyStatus.Text = "Invalid key! Try again."
    end
end)
