local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local RemoteEvents = ReplicatedStorage:WaitForChild("RemoteEvents")
local UnlockCharacterEvent = RemoteEvents:WaitForChild("UnlockCharacter")
local InvincibilityEvent = RemoteEvents:WaitForChild("SetInvincible")
local leaderstats = LocalPlayer:WaitForChild("leaderstats")
local Coins = leaderstats:WaitForChild("Coins")

local CharactersToUnlock = {
"_exempt","_exempt","_exempt","Character","Character","Pulse","Azula","Azula","Azula","Azula","Azula","Azula","Azula","PersonalShield","SummonShield","SummonShield","PersonalShield","PersonalShield","SummonShield","FateClone","FateClone2","FateClone","SandClone","Pulse","PersonalShield","SummonShield","PersonalShield","SummonShield","PersonalShield","SummonShield","HumanTorch","SkeletonSypha2","Clone1","Clone2","SkeletonSypha2","Clone1","Clone2","HumanTorch","HumanTorch","HumanTorch","HumanTorch","HumanTorch","HumanTorch","Pulse","PersonalShield","SummonShield","LokiClone","LokiClone","LokiCloneOld","LokiClone","LokiClone","Goblin","PalaceGoblin","DEMON","MomWandaX","MantisX","DEMON","MomWandaX","MantisX","DEMON","Skeleton","MomWandaX","MantisX","DEMON","MomWandaX","MantisX","DEMON","MomWandaX","MantisX","NPCRaven","Pulse","NPCRaven","NPCRaven","NPCRaven","Pulse","Pulse","SabrinaRaven","DemonGoat","SabrinaRaven","DemonGoat","SabrinaRaven","DemonGoat","JohnnyFireRaven","DemonGoat","DemonGoat","Goblin","PalaceGoblin","SummonShield","PersonalShield","SylvieClone","Syp","Victim","SkeletonSypha2","Syp","Victim","SkeletonSypha2","Syp","Victim","SkeletonSypha2","PersonalShield","SummonShield","Pulse","NPCRaven","RigAbsorb","SandClone","SandClone","SabrinaRaven","DemonGoat","StrangeClone","StrangeClone","AgathaHarkness","AgathaHarknessBad","AgathaHarknessWW","AgathaHarknessYouth","AgathaLight","AgathaLightCivil","AgathaLightSecond","Ajak","AjakArianna","ArcherSkeleton","AtomEve","AtomEveWardrobe","AtomEveXmas","Azula","Bella","BlackPanther","BlackWidow","BlackWidowGreen","BlackWidowRed","BlackWidowYellow","Bloom","BlueMarvel","Bonnie","BonnieCheerleader","BumbleBee","BumbleBey","BumbleWasp","ChildKlarion","Cyborg","DanSpooky","DarkBloom","DarkJosie","DarkPhoenix","DarkPhoenixArmor","DarkPhoenixMaleficent","DarkPhoenixRage","DarkPhoenixXMen","DarkPhoenixXmas","DrFate","DrFateZat","DragonFairy","Dust","Eleven","ElevenCarrie","EmmaFrost","EmmaFrostIceQueen","EmmaFrostLore","FirePrincess","GwenBen10","GwenProm","GwenPromAmoria","HarryWizard","Hera","Hermoi","HumanTorch","HumanTorchFuture","HumanTorchZuko","IceWitch","IceWitchEsdeath","Ikaris","InvisibleWoman","InvisibleWomanBride","InvisibleWomanFuture","InvisibleWomanViolet","InvisibleWomanXmas","IronMan","IronManSuperior","JavelinSkeleton","JohnLantern","Katara","KingBlackPanther","KingOfHalloween","Klarion","ZatannaXmas","Loki","LokiSkinVariant","LokiVday","LokiXmas","MadelynePryor","Magik","MagikDevil","MagikXMen","Magneto","MagnetoY2K","MaleficentAscended","Mantis","Mera","MoMFortuneTeller","MomWanda","MomWandaCorrupted","MomWandaJennifer","MomWandaProdigy","Musa","NatureFairy","PercyJackson","Player067","Solaris","Polaris","PolarisTheGifted","PolarisVday","Powergirl","PromRaven","Psylocke","PsylockeOld","Raven","RavenWardrobe","RavenWardrobeY2K","RobotDoll","Roman","Sabrina","SabrinaGoldenRuler","SabrinaJohnnyFire","ScarletFortuneTeller","ScarletUltron","ScarletWitch","ScarletWitchValentine","ScarletWitchVariant","ScarletWitchVariantUltron","ScarletWitchVariantValentine","ScarletWitchXmas","ScarletWitchZombie","ScarletWitchZombieVariant","Shiklah","Spidergwen","Spiderman","SpidermanXmas","SquidManager","SquidSoldier","SquidWorker","StarSapphire","Stella","StellaEnchantix","Storm","StormBride","StormChristmas","StormValentine","StormXSkin","Stormy","StormyNickiX","SunnyGwen","Supergirl","SupergirlBreached","SupergirlUpgraded","SupergirlXmas","Superman","SupermanBizarre","SupermanInjustice","SylvieX","Sypha","SyphaNomad","SyphaXmas","Tevin","Thor","ThorJaneFoster","ThorZeus","TrinityY2KBlue","TrinityY2KGrey","TrinityY2KPink","Ultron","VariantFortuneTeller","Venom","WandaVision","WandaVisionWardrobe","WandaVisionWardrobeVariant","WaterFairy","WaterMaster","Wednesday","WednesdayLore","WednesdayMadison","WhiteRaven","Y2KMadison","ZatProm","Zatanna","ZatannaCharm","ZatannaGlinda","ZatannaJustice","LaurenStrucker","DustCleopatra","DustAnubis","SabrinaDaenerys","DrStrange","DrStrangeAncient","Evanora","ZatannaZeZe","PoisonIvy","TechFairy","SolarisY2K","MotherNature","PsylockeSakura","AgathaCasual","Goblin","Goblin","Goblin","Goblin","MCU","RavenRage","RavenRage","LimboShiklahMorph","AgathaMother","SummonShield","1PlaceDummy","2PlaceDummy","3PlaceDummy","vmqzxo","gertrudeisbest_123","Lordgamer8452","pamidorkka","ell1vxs","CataclysmAgnes","Dark166076","BlueOcean_Clouds","l_albo1","MienoTC","hiddeninthesilence","darioxvs"
}

local function createGui()
    local ScreenGui = Instance.new("ScreenGui", PlayerGui)
    ScreenGui.Name = "FentonGui"
    ScreenGui.ResetOnSpawn = false

    local mainFrame = Instance.new("Frame", ScreenGui)
    mainFrame.Size = UDim2.new(0, 360, 0, 420)
    mainFrame.Position = UDim2.new(0.5, -180, 0.5, -210)
    mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    mainFrame.Active = true
    mainFrame.Draggable = true

    local title = Instance.new("TextLabel", mainFrame)
    title.Size = UDim2.new(1, 0, 0, 40)
    title.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    title.TextColor3 = Color3.new(1, 1, 1)
    title.Text = "Fenton Cheats"
    title.Font = Enum.Font.SourceSansBold
    title.TextSize = 26
    title.BorderSizePixel = 0

    local closeButton = Instance.new("TextButton", mainFrame)
    closeButton.Size = UDim2.new(0, 30, 0, 30)
    closeButton.Position = UDim2.new(1, -35, 0, 5)
    closeButton.Text = "X"
    closeButton.TextColor3 = Color3.new(1, 1, 1)
    closeButton.BackgroundColor3 = Color3.fromRGB(180, 0, 0)
    closeButton.Font = Enum.Font.SourceSansBold
    closeButton.TextSize = 20
    closeButton.BorderSizePixel = 0

    local minimizeButton = Instance.new("TextButton", mainFrame)
    minimizeButton.Size = UDim2.new(0, 30, 0, 30)
    minimizeButton.Position = UDim2.new(1, -70, 0, 5)
    minimizeButton.Text = "_"
    minimizeButton.TextColor3 = Color3.new(1, 1, 1)
    minimizeButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    minimizeButton.Font = Enum.Font.SourceSansBold
    minimizeButton.TextSize = 24
    minimizeButton.BorderSizePixel = 0

    local contentFrame = Instance.new("Frame", mainFrame)
    contentFrame.Size = UDim2.new(1, -20, 1, -60)
contentFrame.Position = UDim2.new(0, 10, 0, 50)
contentFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
contentFrame.BorderSizePixel = 0

local function createButton(text, parent, yPos)
    local btn = Instance.new("TextButton", parent)
    btn.Size = UDim2.new(1, 0, 0, 40)
    btn.Position = UDim2.new(0, 0, 0, yPos)
    btn.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.Text = text
    btn.Font = Enum.Font.SourceSansBold
    btn.TextSize = 20
    btn.BorderSizePixel = 0
    return btn
end

local unlockBtn = createButton("Unlock All Characters", contentFrame, 0)
local coinsBtn = createButton("Give Infinite Coins", contentFrame, 50)
local invBtn = createButton("Toggle Invincibility", contentFrame, 100)

local invincible = false

local function unlockAllCharacters()
    for _, characterName in pairs(CharactersToUnlock) do
        pcall(function()
            UnlockCharacterEvent:FireServer(characterName)
        end)
    end
end

local function giveInfiniteCoins()
    local hugeAmount = 9e15
    if Coins then
        Coins.Value = hugeAmount
        -- Attempt to fire any relevant server event to sync coins properly
        if RemoteEvents:FindFirstChild("UpdateCoins") then
            RemoteEvents.UpdateCoins:FireServer(hugeAmount)
        end
    end
end

local function toggleInvincibility()
    invincible = not invincible
    InvincibilityEvent:FireServer(invincible)
end

unlockBtn.MouseButton1Click:Connect(unlockAllCharacters)
coinsBtn.MouseButton1Click:Connect(giveInfiniteCoins)
invBtn.MouseButton1Click:Connect(toggleInvincibility)

closeButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

local minimized = false
local openButton

minimizeButton.MouseButton1Click:Connect(function()
    if not minimized then
        mainFrame.Visible = false
        minimized = true
        openButton = Instance.new("TextButton", PlayerGui)
        openButton.Size = UDim2.new(0, 100, 0, 40)
        openButton.Position = UDim2.new(0, 10, 0, 10)
        openButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
        openButton.TextColor3 = Color3.new(1, 1, 1)
        openButton.Text = "Open Cheats"
        openButton.Font = Enum.Font.SourceSansBold
        openButton.TextSize = 20
        openButton.BorderSizePixel = 0
        openButton.ZIndex = 10

        openButton.MouseButton1Click:Connect(function()
            mainFrame.Visible = true
            minimized = false
            openButton:Destroy()
        end)
    end
end)

return ScreenGui
end

local keyGui = Instance.new("ScreenGui", PlayerGui)
keyGui.Name = "KeyGui"
keyGui.ResetOnSpawn = false

local keyFrame = Instance.new("Frame", keyGui)
keyFrame.Size = UDim2.new(0, 320, 0, 150)
keyFrame.Position = UDim2.new(0.5, -160, 0.5, -75)
keyFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
keyFrame.Active = true
keyFrame.Draggable = true

local keyTitle = Instance.new("TextLabel", keyFrame)
keyTitle.Size = UDim2.new(1, 0, 0, 50)
keyTitle.Position = UDim2.new(0, 0, 0, 0)
keyTitle.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
keyTitle.TextColor3 = Color3.new(1, 1, 1)
keyTitle.Text = "Enter Key to Use Cheats"
keyTitle.Font = Enum.Font.SourceSansBold
keyTitle.TextSize = 24
keyTitle.BorderSizePixel = 0

local keyBox = Instance.new("TextBox", keyFrame)
keyBox.Size = UDim2.new(1, -40, 0, 50)
keyBox.Position = UDim2.new(0, 20, 0, 60)
keyBox.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
keyBox.TextColor3 = Color3.new(1, 1, 1)
keyBox.ClearTextOnFocus = false
keyBox.PlaceholderText = "Enter Key Here"
keyBox.Font = Enum.Font.SourceSansBold
keyBox.TextSize = 22
keyBox.BorderSizePixel = 0

local submitButton = Instance.new("TextButton", keyFrame)
submitButton.Size = UDim2.new(0, 100, 0, 40)
submitButton.Position = UDim2.new(1, -110, 1, -50)
submitButton.BackgroundColor3 = Color3.fromRGB(0, 120, 0)
submitButton.TextColor3 = Color3.new(1, 1, 1)
submitButton.Text = "Submit"
submitButton.Font = Enum.Font.SourceSansBold
submitButton.TextSize = 20
submitButton.BorderSizePixel = 0

local function onSubmit()
    local enteredKey = keyBox.Text
    if string.lower(enteredKey) == "fenton" then
        keyGui:Destroy()
        createGui()
    else
        keyBox.Text = ""
        keyBox.PlaceholderText = "Incorrect Key, Try Again"
    end
end

submitButton.MouseButton1Click:Connect(onSubmit)
keyBox.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        onSubmit()
    end
end)
